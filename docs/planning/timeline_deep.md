# Planning 深度任务


| id         | type     | title                                                                   | milestone                      | eta | priority | status      | depends      | design_link                                  | accept_link | notes |
|-----------|----------|-------------------------------------------------------------------------|---------------------------------|-----|----------|-------------|--------------|----------------------------------------------|-------------|-------|
| PLD-001   | feature  | multi-round planning：多轮规划主循环机制（round1→roundN）                | M25: Advanced Planning           | TBD | P0       | idea        | PLN-001      | docs/system/phases/planning.md               |             | 引入回合：initial → refine → align → finalize。 |
| PLD-002   | feature  | multi-round planning：自动判断是否需要下一轮（clarify / redo / refine）   | M25                              | TBD | P0       | idea        | PLD-001      | docs/system/phases/planning.md               |             | 根据 planning memory、scope coverage、用户输入变化等条件判断。 |
| PLD-003   | feature  | multi-round planning：在 round 间构建 memory.prompt（摘要 + 上下文）      | M25                              | TBD | P1       | idea        | PLN-021,PLD-001 | docs/system/schemas/planning-schema.md    |             | 让下一轮规划知道上一轮内容（requirement 变更 / open-item 等）。 |

| id         | type     | title                                                                   | milestone                      | eta | priority | status      | depends      | design_link                                  | accept_link | notes |
|-----------|----------|-------------------------------------------------------------------------|---------------------------------|-----|----------|-------------|--------------|----------------------------------------------|-------------|-------|
| PLD-011   | feature  | Planning Roles：architect 角色（结构规划 / 大蓝图）                      | M25                              | TBD | P1       | idea        | AGT-002      | docs/system/agents/roles.md                  |             | architect 负责：整体结构、模块拆解、层级规划。 |
| PLD-012   | feature  | Planning Roles：reviewer 角色（识别风险与缺漏）                          | M25                              | TBD | P1       | idea        | AGT-002      | docs/system/agents/roles.md                  |             | reviewer 检查 scope completeness / risk / constraint。 |
| PLD-013   | feature  | Planning Roles：coach 角色（辅助用户澄清需求）                           | M25                              | TBD | P2       | idea        | AGT-002      | docs/system/agents/roles.md                  |             | coach 用于 clarify 回合，帮助用户补充需求。 |
| PLD-014   | infra    | 角色融合策略：architect → reviewer → coach 的 pipeline 顺序              | M25                              | TBD | P2       | idea        | PLD-011,PLD-012,PLD-013 | docs/system/agents/roles.md  |             | 多角色顺序调用形成多角度 high-quality plan。 |

| id         | type     | title                                                                   | milestone                      | eta | priority | status      | depends      | design_link                                  | accept_link | notes |
|-----------|----------|-------------------------------------------------------------------------|---------------------------------|-----|----------|-------------|--------------|----------------------------------------------|-------------|-------|
| PLD-021   | feature  | planning memory：定义 memory.prompt 的结构（inputs / refinements / deltas） | M25                           | TBD | P1       | idea        | PLN-021      | docs/system/schemas/planning-schema.md       |             | memory.prompt = “规划输入 + 地图 + 变更列表”。 |
| PLD-022   | infra    | planning memory：增加 delta 记录机制（需求变更追踪）                     | M25                              | TBD | P2       | idea        | PLD-021      | docs/system/schemas/planning-schema.md       |             | delta 用于下一轮判断 redo 或 refine。 |
| PLD-023   | infra    | planning memory：回合索引（roundId / stepId）                            | M25                              | TBD | P3       | idea        | PLD-021      | docs/system/schemas/planning-schema.md       |             | 对 multi-round planning 至关重要。 |

| id         | type     | title                                                                   | milestone                      | eta | priority | status      | depends      | design_link                                  | accept_link | notes |
|-----------|----------|-------------------------------------------------------------------------|---------------------------------|-----|----------|-------------|--------------|----------------------------------------------|-------------|-------|
| PLD-031   | feature  | 层级规划（Hierarchical Planning）：将总体目标拆成 epics → tasks → steps   | M25                           | TBD | P1       | idea        | PLN-001      | docs/system/phases/planning.md               |             | 为 codegen 提供可执行的 task 级输入。 |
| PLD-032   | feature  | 结构化 output：在 final plan 生成 roadmap 结构（epics/tasks/milestones） | M25                           | TBD | P1       | idea        | PLD-031      | docs/system/phases/planning.md               |             | 确定任务分层结构，为 timeline sync 提供基础。 |
| PLD-033   | infra    | 完整的“scope coverage analysis”（识别未覆盖的需求）                      | M25                           | TBD | P2       | idea        | PLD-031      | docs/system/phases/planning.md               |             | 规划输出必须保证 requirements coverage=100%。 |
| PLD-034   | infra    | “risk analysis” 输出增强（技术风险 / 协作风险 / 工具风险）                | M25                           | TBD | P3       | idea        | PLD-031      | docs/system/phases/planning.md               |             | 输出 risk[]，供 reviewer 和 accept 参考。 |

| id         | type     | title                                                                   | milestone                      | eta | priority | status      | depends      | design_link                                  | accept_link | notes |
|-----------|----------|-------------------------------------------------------------------------|---------------------------------|-----|----------|-------------|--------------|----------------------------------------------|-------------|-------|
| PLD-041   | feature  | spec → planning 自动转换（OpenSpec → initial plan.md）                   | M25                              | TBD | P1       | idea        | OPS-001      | docs/system/integrations/openspec.md         |             | 用 openspec 配置生成规划初稿。 |
| PLD-042   | infra    | spec diff → planning delta（openspec 变更 → planning memory delta）      | M25                              | TBD | P2       | idea        | PLD-041      | docs/system/integrations/openspec.md         |             | 用于支持“动态需求更新”。 |

| id         | type     | title                                                                   | milestone                      | eta | priority | status      | depends      | design_link                                  | accept_link | notes |
|-----------|----------|-------------------------------------------------------------------------|---------------------------------|-----|----------|-------------|--------------|----------------------------------------------|-------------|-------|
| PLD-051   | feature  | plan → codegen 契约（规划必须产生“可执行 tasks”）                        | M25                              | TBD | P0       | idea        | PLN-001      | docs/system/phases/planning.md               |             | 确保 codegen 可以直接基于 plan 产出的任务执行。 |
| PLD-052   | infra    | planning evaluator（评估规划质量 metrics：coverage / clarity / structure） | M25                           | TBD | P1       | idea        | PLD-031      | docs/system/phases/planning.md               |             | 可作为 test_phase 的一部分。 |
| PLD-053   | infra    | planning gatekeeper（不合格规划自动重试/clarify）                         | M25                              | TBD | P2       | idea        | PLD-052      | docs/system/phases/planning.md               |             | 类似 code review 的“planning review gate”。 |